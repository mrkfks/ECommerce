<div class="register-page py-5">
  <div class="container">
    <div class="row justify-content-center">
      <div class="col-md-6 col-lg-5">
        <div class="card shadow-lg border-0">
          <div class="card-body p-5">
            <!-- Logo -->
            <div class="text-center mb-4">
              <i class="bi bi-shop text-primary" style="font-size: 3rem;"></i>
              <h2 class="mt-2 fw-bold">Kayıt Ol</h2>
              <p class="text-muted">Yeni hesap oluşturun</p>
            </div>

            <!-- Error Alert -->
            @if (error) {
              <div class="alert alert-danger d-flex align-items-center" role="alert">
                <i class="bi bi-exclamation-triangle-fill me-2"></i>
                {{ error }}
              </div>
            }

            <!-- Register Form -->
            <form (ngSubmit)="onSubmit()">
              <div class="row">
                <div class="col-md-6 mb-3">
                  <label for="firstName" class="form-label">Ad</label>
                  <input 
                    type="text" 
                    class="form-control" 
                    id="firstName" 
                    [(ngModel)]="formData.firstName"
                    name="firstName"
                    placeholder="Adınız"
                    required>
                </div>
                <div class="col-md-6 mb-3">
                  <label for="lastName" class="form-label">Soyad</label>
                  <input 
                    type="text" 
                    class="form-control" 
                    id="lastName" 
                    [(ngModel)]="formData.lastName"
                    name="lastName"
                    placeholder="Soyadınız"
                    required>
                </div>
              </div>

              <div class="mb-3">
                <label for="phoneNumber" class="form-label">Telefon</label>
                <div class="input-group">
                  <span class="input-group-text"><i class="bi bi-telephone"></i></span>
                  <input 
                    type="tel" 
                    class="form-control" 
                    id="phoneNumber" 
                    [(ngModel)]="formData.phoneNumber"
                    name="phoneNumber"
                    placeholder="05xx xxx xx xx"
                    required>
                </div>
              </div>

              <div class="mb-3">
                <label for="username" class="form-label">Kullanıcı Adı</label>
                <div class="input-group">
                  <span class="input-group-text"><i class="bi bi-person"></i></span>
                  <input 
                    type="text" 
                    class="form-control" 
                    [class.is-invalid]="usernameError ? true : false"
                    [class.is-valid]="usernameValid ? true : false"
                    id="username" 
                    [(ngModel)]="formData.username"
                    (blur)="onUsernameBlur()"
                    name="username"
                    placeholder="kullanici_adi"
                    required>
                  @if (usernameChecking) {
                    <span class="input-group-text">
                      <span class="spinner-border spinner-border-sm" role="status" aria-hidden="true"></span>
                    </span>
                  }
                  @if (usernameValid) {
                    <span class="input-group-text text-success">
                      <i class="bi bi-check-circle-fill"></i>
                    </span>
                  }
                </div>
                @if (usernameError) {
                  <div class="invalid-feedback d-block">
                    {{ usernameError }}
                  </div>
                } @else {
                  <small class="text-muted">Sadece harf, rakam ve alt çizgi (3+ karakter)</small>
                }
              </div>

              <div class="mb-3">
                <label for="email" class="form-label">E-posta</label>
                <div class="input-group">
                  <span class="input-group-text"><i class="bi bi-envelope"></i></span>
                  <input 
                    type="email" 
                    class="form-control" 
                    [class.is-invalid]="emailError ? true : false"
                    [class.is-valid]="emailValid ? true : false"
                    id="email" 
                    [(ngModel)]="formData.email"
                    (blur)="onEmailBlur()"
                    name="email"
                    placeholder="ornek&#64;email.com"
                    required>
                  @if (emailChecking) {
                    <span class="input-group-text">
                      <span class="spinner-border spinner-border-sm" role="status" aria-hidden="true"></span>
                    </span>
                  }
                  @if (emailValid) {
                    <span class="input-group-text text-success">
                      <i class="bi bi-check-circle-fill"></i>
                    </span>
                  }
                </div>
                @if (emailError) {
                  <div class="invalid-feedback d-block">
                    {{ emailError }}
                  </div>
                }
              </div>

              <div class="mb-3">
                <label for="password" class="form-label">Şifre</label>
                <div class="input-group">
                  <span class="input-group-text"><i class="bi bi-lock"></i></span>
                  <input 
                    [type]="showPassword ? 'text' : 'password'" 
                    class="form-control" 
                    id="password" 
                    [(ngModel)]="formData.password"
                    name="password"
                    placeholder="En az 6 karakter"
                    required>
                  <button 
                    class="btn btn-outline-secondary" 
                    type="button"
                    (click)="togglePassword()">
                    <i class="bi" [class.bi-eye]="!showPassword" [class.bi-eye-slash]="showPassword"></i>
                  </button>
                </div>
              </div>

              <div class="mb-3">
                <label for="confirmPassword" class="form-label">Şifre Tekrar</label>
                <div class="input-group">
                  <span class="input-group-text"><i class="bi bi-lock-fill"></i></span>
                  <input 
                    [type]="showPassword ? 'text' : 'password'" 
                    class="form-control" 
                    id="confirmPassword" 
                    [(ngModel)]="formData.confirmPassword"
                    name="confirmPassword"
                    placeholder="Şifrenizi tekrar girin"
                    required>
                </div>
              </div>

              <div class="mb-4">
                <div class="form-check">
                  <input 
                    class="form-check-input" 
                    type="checkbox" 
                    id="terms"
                    [(ngModel)]="acceptTerms"
                    name="terms">
                  <label class="form-check-label" for="terms">
                    <a href="#" class="text-decoration-none">Kullanım koşullarını</a> kabul ediyorum
                  </label>
                </div>
              </div>

              <button 
                type="submit" 
                class="btn btn-primary w-100 py-2"
                [disabled]="isLoading">
                @if (isLoading) {
                  <span class="spinner-border spinner-border-sm me-2" role="status"></span>
                  Kayıt yapılıyor...
                } @else {
                  <i class="bi bi-person-plus me-2"></i>Kayıt Ol
                }
              </button>
            </form>

            <!-- Login Link -->
            <div class="text-center mt-4">
              <p class="mb-0">
                Zaten hesabınız var mı? 
                <a routerLink="/login" class="text-decoration-none fw-bold">Giriş Yap</a>
              </p>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
